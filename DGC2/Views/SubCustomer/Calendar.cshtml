@using EntityLayer.Concrete
@model List<Calendar>
@{
    ViewBag.Title = "Calendar";
    Layout = "~/Views/Shared/_SubCustomerLayout.cshtml";
}
<!DOCTYPE html>

<title>DGC Lojistik</title>
@*<table class="table table-bordered">

        <tr>

            <th>Saat Başlangıç</th>
            <th>Saat Bitiş</th>
            <th>Randevu Al</th>
            <th>Toplam Miktar</th>
            <th>Toplam Palet</th>
        </tr>
        @foreach (var item in Model)
        {
            <tr>

                <td>@item.CLStartDate</td>
                <td>@item.CLFinishDate</td>

                <td><a href="/SubCustomer/AddAppoinment/@item.CalendarID" class="btn btn-success">Randevu Al</a></td>
                <td>@item.CLDailyAmount
                       /
                    @item.CLAmount
                </td>
                <td>
                    @item.CLDailyPaletAmount
                            /
                            @item.CLPalletCapacity
                        </td>
            </tr>
        }
    </table>*@

<body class="hold-transition sidebar-mini">
    <script src="~/Scripts/jquery-3.4.1.min.js" type="text/javascript"></script>
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">

                </div>
            </div>
        </div><!-- /.container-fluid -->
    </section>
    <!-- Main content -->
    <section class="content">
        <!-- Default box -->
        <div class="card">
            <div class="card-header d-flex justify-content-center">
                <h3 class="card-title " style="font-size: 30px; font-weight: 700; ">
                    Randevu Saatleri
                    <br />
                    <span style="font-size: 30px; font-weight: 500; ">@(((DateTime)DateTime.Now).ToString("dd MMMM yyyy"))</span>
                </h3>


                <div class="card-tools">


                </div>
            </div>
            <div class="card-body p-0">
                <table class="table table-striped projects">
                    <thead>
                        <tr>
                            <th style="width: 10%;">
                                Dilim
                            </th>
                            <th style="width: 8%;">
                                Saat Başlangıç
                            </th>
                            <th style="width: 15%;">
                                Saat Bitiş
                            </th>
                            <th style="width: 10%">
                                Randevu Al
                            </th>
                            <th style="width: 15%; text-align: center">
                               Dökme Doluluk Oranı
                            </th>
                            <th style="width: 15%; text-align:center">
                                Palet Doluluk Oranı
                            </th>
                            @*<th style="width: 20%">
        </th>*@
                        </tr>
                    </thead>
                    <tbody>

                        @{int a = 1; }
                        @{int lastslice = 1; }
                        @{
                            var today = DateTime.Now;
                            var tomorrow = today;
                        }
                        @for (int i = 1; i <= lastslice; i++)
                        {

                            //for (int j = 1; j <= 4; j++)
                            //{
                            foreach (var item in Model)
                            {

                                //var today = DateTime.Now;
                                tomorrow = today.AddDays(i - 1);
                                

                                    <tr>
                                        <td style="font-size: 25px;">
                                            @*@item.CLStartDate*@
                                            @item.CLSlice

                                        </td>
                                        <td style="font-size: 25px;">
                                            @*@item.CLStartDate*@
                                            @*@(((DateTime)tomorrow).ToString("hh:mm"))*@ @item.CLStartDate.ToString("hh:mm")

                                        </td>
                                        <td>
                                            <a style="font-size: 25px;">
                                                @(((DateTime)item.CLFinishDate).ToString("hh:mm"))
                                            </a>
                                            <br />

                                        </td>
                                        <td>
                                            <ul class="list-inline">
                                                <li class="list-inline-item btn btn-warning" style="font-size: 25px; font-weight: 600; ">

                                                   @Html.ActionLink("Randevu Al", "AddAppoinment", "SubCustomer", new { mydatetime = tomorrow, id = item.CalendarID }, null)
                                                   
                                                </li>

                                            </ul>

                                        </td>

                                        <!--<td>-->
                                        @*<p style="font-weight:800; font-size:20px" class="badge badge-primary">Onay Bekleniyor</p>*@
                                        <!--</td>-->
                                        <td class="project-state ">
                                            <div class="badge badge-warning" style="font-size:25px">
                                                @item.CLDailyAmount%
                                                -
                                                100% @*@item.CLAmount*@
                                            </div>

                                        </td>

                                        <td class="project-state " style="font-size:25px">
                                            <div class="badge badge-warning" style="font-size:25px">
                                                @item.CLDailyPaletAmount%
                                                -
                                                100%  @*@item.CLPalletCapacity*@
                                            </div>

                                        </td>
                                        @*<td class="project-actions text-right">
                        </td>*@
                                    </tr>








                                    item.CLDailyAmount = 0;
                                    item.CLDailyPaletAmount = 0;
                                }
                            @*}*@
                            

                        }
                        @*@while (a <= 7)
                        {



                        }*@

                    </tbody>
                </table>
            </div>
            <!-- /.card-body -->
        </div>
        <!-- /.card -->
    </section>

    @*<script type="text/javascript">

            $(function () {
                $("#getapp").click(function () {
                    var s = $("#tomorrow").val();
                    $.ajax({
                        type: "POST",
                        url: "/SubCustomer/AddAppoinment/", // the method we are calling
                        contentType: "application/json; charset=utf-8",
                        data: { tempDataValue: s },
                        dataType: "json",
                        success: function (result) {
                            alert('Yay! It worked!');
                            // Or if you are returning something
                            alert('I returned... ');
                        },
                        error: function (result) {
                            alert('Oh no :(');
                        }
                    });
                });
            });

        </script>*@
</body>





